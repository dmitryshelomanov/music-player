(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[0],{45:function(n,e,t){"use strict";t.r(e);var r=t(1),i=t(0),c=t.n(i),a=t(25),o=t.n(a),u=t(16),s=t(3),f=t(4),d=t(5),l=t(15),b=t.p+"static/media/bg.418ef879.jpg",j=t(17),h=t.n(j);function p(){var n=Object(f.a)(["\n  display: flex;\n  width: 100%;\n  box-sizing: border-box;\n  list-style: none;\n  flex-direction: column;\n  cursor: pointer;\n  transition: 0.3s;\n  padding: 25px 15px;\n  font-size: 12px;\n  font-weight: 300;\n  border-bottom: 1px solid #e6e6e6;\n\n  &:hover {\n    background: #eb2045;\n    color: #fff;\n  }\n\n  &.active {\n    background: #eb2045;\n    color: #fff;\n  }\n"]);return p=function(){return n},n}function v(){var n=Object(f.a)(["\n  width: 100%;\n  margin: 0;\n  padding: 0;\n"]);return v=function(){return n},n}var O=d.b.ul(v()),x=d.b.li(p());function g(n){var e=n.list,t=n.onTrackClick,i=n.activeTrack;return Object(r.jsx)(O,{children:e.map((function(n){return Object(r.jsx)(x,{className:h()({active:i===n}),onClick:function(){t(n)},children:n.name},"".concat(n.name,"/").concat(n.lastModified))}))})}function m(){var n=Object(f.a)(["\n  font-size: 16px;\n"]);return m=function(){return n},n}function w(){var n=Object(f.a)(["\n  width: 100%;\n  padding: 1px 15px;\n  background: rgba(11, 11, 11, 0.1);\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  box-sizing: border-box;\n"]);return w=function(){return n},n}var y=d.b.div(w()),k=d.b.h3(m());function E(){return Object(r.jsx)(y,{children:Object(r.jsx)(k,{children:"Up next"})})}function A(){var n=Object(f.a)(["\n  width: 320px;\n  height: 510px;\n  background: #fff;\n  border-radius: 5px;\n  box-shadow: 0 0 20px 0px #6c171e;\n  overflow: hidden;\n"]);return A=function(){return n},n}var T=d.b.div(A());function z(n){var e=n.list,t=n.toggleTrack,i=n.activeTrack;return Object(r.jsxs)(T,{children:[Object(r.jsx)(E,{}),Object(r.jsx)(g,{list:e,onTrackClick:t,activeTrack:i})]})}var D=t(6),F=t(2),R=t(29),B=t(20),C=t.n(B),L=t(30),S=t(31),M=window.AudioContext||window.webkitAudioContext,P=new function n(){var e=this;Object(S.a)(this,n),this.updateByteData=function(){e.analyser.getByteFrequencyData(e.dataArray)},this.play=function(n){return new Promise(function(){var t=Object(L.a)(C.a.mark((function t(r,i){return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ctx.resume();case 3:return e.audio.muted=!1,e.audio.src=window.URL.createObjectURL(n),t.next=7,e.audio.play();case 7:r(!0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),i(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(n,e){return t.apply(this,arguments)}}())},this.pause=function(){e.audio.pause()},this.audio=new Audio,this.ctx=new M,this.source=this.ctx.createMediaElementSource(this.audio),this.analyser=this.ctx.createAnalyser(),this.analyser.fftSize=2048,this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.source.connect(this.analyser),this.analyser.connect(this.ctx.destination),this.trackEnded=Object(F.createEvent)(),this.audio.addEventListener("ended",(function(){e.trackEnded()}))};function q(){var n=Object(f.a)(["\n  display: none;\n"]);return q=function(){return n},n}function U(){var n=Object(f.a)(["\n  color: #03a9f4;\n  margin-top: 5px;\n"]);return U=function(){return n},n}function I(){var n=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 480px;\n  width: 100%;\n  height: 125px;\n  border: 2px dashed rgba(121, 183, 125, 1);\n  color: rgb(121, 183, 125);\n  transition: 0.5s;\n  opacity: 0.5;\n\n  &.error {\n    border-color: red;\n    color: red;\n  }\n"]);return I=function(){return n},n}var J=d.b.div(I()),N=d.b.label.attrs({htmlFor:"file"})(U()),W=d.b.input.attrs({type:"file",id:"file"})(q());function H(n){var e=n.handleFiles,t=n.error,c=Object(i.useRef)();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(J,{className:h()({error:!!t}),ref:c,onDrop:function(n){n.preventDefault(),e(n.dataTransfer.files)},onDragOver:function(n){n.preventDefault()},children:Object(r.jsx)("p",{children:t||"drag & drop music list"})}),Object(r.jsx)(N,{children:"or click here for open files"}),Object(r.jsx)(W,{onChange:function(n){e(n.target.files)},multiple:!0})]})}var G=Object(F.createEvent)(),K=Object(F.createEvent)(),Q=Object(F.createEffect)((function(n){return new Promise((function(e,t){for(var r=["audio/mp3","audio/mp4","audio/mpeg"],i=0;i<n.length;i++)if(-1===r.indexOf(n[i].type)){t("has invalid type of files");break}e(Array.from(n))}))})),V=Object(F.restore)(Q.doneData,[]),X=Object(F.restore)(Q.failData,null).reset(Q.doneData),Y=Object(F.restore)(K,null);Object(F.forward)({from:G,to:Q});var Z=Object(F.createEvent)(),$=Object(F.createEvent)(),_=Object(F.createEvent)(),nn=Object(F.createEvent)(),en=Object(F.createEffect)().use(P.play),tn=Object(F.createEffect)().use(P.pause),rn=Object(F.createStore)(!1).on(Z,(function(){return!0})).reset($),cn=Object(F.combine)({trackList:V,activeTrack:Y,isPlays:rn}),an=Object(F.sample)(cn,_,(function(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e}));function on(){var n=Object(f.a)(['\n  body {\n    color: #0B0B0B;\n    font-family: "Roboto Mono", monospace;\n    text-rendering: optimizeLegibility;\n    -webkit-font-smoothing: antialiased;\n    width: 100vw;\n    height: 100vh;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n  }\n\n  #root {\n    width: 100%;\n    height: 100%;\n  }\n\n  audio {\n    position: absolute;\n    z-index: 5;\n    top: 0;\n    left: 0\n  }\n']);return on=function(){return n},n}Object(R.condition)({source:an,if:function(n){var e=Object(D.a)(n,2),t=e[0],r=t.activeTrack,i=t.isPlays;return r===e[1]&&i},then:$,else:Z.prepend((function(n){var e=Object(D.a)(n,2);e[0];return e[1]}))}),Object(F.sample)({source:cn,clock:nn,fn:function(n,e){return function(n){var e=n.list,t=n.activeTrack,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next",i=e.findIndex((function(n){return n===t})),c="next"===r?i+1:i-1;return-1!==i&&e[c]?e[c]:e[0]}(n,e)},target:Z}),Object(F.forward)({from:Z,to:[K,en]}),Object(F.forward)({from:$,to:tn}),Object(F.forward)({from:P.trackEnded,to:nn});var un=Object(d.a)(on());function sn(){var n=Object(f.a)(["\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  z-index: -1;\n  display: flex;\n  align-items: flex-end;\n\n  > svg {\n    width: 100%;\n  }\n"]);return sn=function(){return n},n}var fn=d.b.div(sn());function dn(){var n=Object(i.useRef)(),e=Object(i.useState)(window.innerWidth),t=Object(D.a)(e,2),c=t[0],a=t[1];return function(n){var e=Object(i.useRef)(n);e.current=n,Object(i.useEffect)((function(){function n(){e.current({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[])}((function(n){var e=n.width;a(e)})),Object(i.useEffect)((function(){var e=void 0,t=5*window.devicePixelRatio,r=n.current.getContext("2d"),i=[];return n.current.height=300,n.current.width=c,e=requestAnimationFrame((function a(){n.current&&(P.updateByteData(),r.clearRect(0,0,n.current.width,n.current.height),r.save(),r.translate(0,300),Array.from(P.dataArray).slice(0,Math.ceil(c/t)).forEach((function(n,e){var c=0===n?(i[e]||-1)+1:(i[e]=n,n);r.fillStyle="rgba(235, 32, ".concat(n,", .9)"),r.fillRect(e*t,-1*c,t,300)})),r.stroke(),r.restore(),e=requestAnimationFrame(a))})),function(){cancelAnimationFrame(e)}}),[c]),Object(r.jsx)(fn,{children:Object(r.jsx)("canvas",{ref:n})})}function ln(){var n=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n\n  &:before,\n  &:after,\n  "," {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n"]);return ln=function(){return n},n}function bn(){var n=Object(f.a)(["\n  z-index: -2;\n  filter: blur(2px);\n  background: #fff url(",") center center / cover;\n"]);return bn=function(){return n},n}var jn=d.b.div(bn(),b),hn=d.b.div(ln(),jn);function pn(){var n=Object(s.e)().push,e=Object(l.a)(V),t=Object(l.a)(Y);return Object(i.useEffect)((function(){return function(){$()}}),[]),Object(i.useEffect)((function(){0===e.length&&n("/")}),[n,e.length]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(hn,{children:[Object(r.jsx)(jn,{}),Object(r.jsx)(z,{activeTrack:t,list:e,toggleTrack:function(n){_(n)}})]}),Object(r.jsx)(dn,{})]})}function vn(){var n=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100vw;\n  height: 100vh;\n  flex-direction: column;\n"]);return vn=function(){return n},n}var On=d.b.div(vn());function xn(){var n=Object(s.e)(),e=Object(l.a)(X);return Object(i.useEffect)((function(){return Q.done.watch((function(){n.push("/player")}))}),[n]),Object(r.jsxs)(On,{children:[Object(r.jsx)("h1",{children:"Simple Music Player"}),Object(r.jsx)(H,{handleFiles:G,error:e})]})}function gn(){return Object(r.jsxs)(c.a.StrictMode,{children:[Object(r.jsx)(un,{}),Object(r.jsxs)(u.a,{children:[Object(r.jsx)(s.a,{path:"/",component:xn,exact:!0}),Object(r.jsx)(s.a,{path:"/player",component:pn})]})]})}o.a.render(Object(r.jsx)(gn,{}),document.getElementById("root"))}},[[45,1,2]]]);
//# sourceMappingURL=main.52056218.chunk.js.map