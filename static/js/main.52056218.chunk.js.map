{"version":3,"sources":["assets/bg.jpg","features/player/components/track-list.js","features/player/components/header.js","features/player/components/player.js","lib/analyser.js","features/dropzone/components/zone.js","features/dropzone/model.js","features/player/model.js","ui/global-styles.js","ui/visualize.js","lib/resize.js","pages/player/page.js","pages/dropzone/page.js","index.js"],"names":["List","styled","ul","Item","li","TrackList","list","onTrackClick","activeTrack","map","track","className","classnames","active","onClick","name","lastModified","Wrapper","div","Title","h3","Header","Wrapepr","Player","toggleTrack","AudioCtx","window","AudioContext","webkitAudioContext","analyser","updateByteData","getByteFrequencyData","dataArray","play","Promise","res","rej","a","ctx","resume","audio","muted","src","URL","createObjectURL","pause","this","Audio","source","createMediaElementSource","createAnalyser","fftSize","Uint8Array","frequencyBinCount","connect","destination","trackEnded","createEvent","addEventListener","Label","label","attrs","htmlFor","InputFile","input","type","id","Dropzone","handleFiles","error","zone","useRef","ref","onDrop","e","preventDefault","dataTransfer","files","onDragOver","onChange","target","multiple","setTrackList","setActiveTrack","validateMusicFx","createEffect","validTypes","i","length","indexOf","Array","from","$trackList","restore","doneData","$validateMusicError","failData","reset","$activeTrack","forward","to","switchTrack","playFx","use","pauseFx","$isPlays","createStore","on","$player","combine","trackList","isPlays","toggleTrackWithPlayer","sample","params","condition","if","then","else","prepend","clock","fn","player","direction","index","findIndex","nextIndex","runNextTrack","GlobalStyles","createGlobalStyle","Visualize","useState","innerWidth","canvasWidth","setCanvasWidth","callback","callbackRef","current","useEffect","handler","width","height","innerHeight","removeEventListener","useResize","reqId","undefined","chartWidth","devicePixelRatio","getContext","prevSlice","requestAnimationFrame","tick","clearRect","save","translate","slice","Math","ceil","forEach","data","yPos","fillStyle","fillRect","stroke","cancelAnimationFrame","Background","bg","PlayerWrapper","PlayerPage","push","useHistory","useStore","file","DropzonePage","history","validateMusicError","done","watch","App","StrictMode","path","component","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.52056218.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/bg.418ef879.jpg\";","import React from \"react\";\nimport styled from \"styled-components\";\nimport classnames from \"classnames\";\n\nconst List = styled.ul`\n  width: 100%;\n  margin: 0;\n  padding: 0;\n`;\n\nconst Item = styled.li`\n  display: flex;\n  width: 100%;\n  box-sizing: border-box;\n  list-style: none;\n  flex-direction: column;\n  cursor: pointer;\n  transition: 0.3s;\n  padding: 25px 15px;\n  font-size: 12px;\n  font-weight: 300;\n  border-bottom: 1px solid #e6e6e6;\n\n  &:hover {\n    background: #eb2045;\n    color: #fff;\n  }\n\n  &.active {\n    background: #eb2045;\n    color: #fff;\n  }\n`;\n\nexport function TrackList({ list, onTrackClick, activeTrack }) {\n  return (\n    <List>\n      {list.map((track) => (\n        <Item\n          key={`${track.name}/${track.lastModified}`}\n          className={classnames({ active: activeTrack === track })}\n          onClick={() => {\n            onTrackClick(track);\n          }}\n        >\n          {track.name}\n        </Item>\n      ))}\n    </List>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\n\nconst Wrapper = styled.div`\n  width: 100%;\n  padding: 1px 15px;\n  background: rgba(11, 11, 11, 0.1);\n  display: flex;\n  justify-content: flex-start;\n  align-items: center;\n  box-sizing: border-box;\n`;\n\nconst Title = styled.h3`\n  font-size: 16px;\n`;\n\nexport function Header() {\n  return (\n    <Wrapper>\n      <Title>Up next</Title>\n    </Wrapper>\n  );\n}\n","import React from \"react\";\nimport styled from \"styled-components\";\nimport { TrackList } from \"./track-list\";\nimport { Header } from \"./header\";\n\nconst Wrapepr = styled.div`\n  width: 320px;\n  height: 510px;\n  background: #fff;\n  border-radius: 5px;\n  box-shadow: 0 0 20px 0px #6c171e;\n  overflow: hidden;\n`;\n\nexport function Player({ list, toggleTrack, activeTrack }) {\n  return (\n    <Wrapepr>\n      <Header />\n      <TrackList\n        list={list}\n        onTrackClick={toggleTrack}\n        activeTrack={activeTrack}\n      />\n    </Wrapepr>\n  );\n}\n","import { createEvent } from \"effector\";\n\nconst AudioCtx = window.AudioContext || window.webkitAudioContext;\n\nclass Analyser {\n  constructor() {\n    this.audio = new Audio();\n    this.ctx = new AudioCtx();\n    this.source = this.ctx.createMediaElementSource(this.audio);\n    this.analyser = this.ctx.createAnalyser();\n    this.analyser.fftSize = 2048;\n    this.dataArray = new Uint8Array(this.analyser.frequencyBinCount);\n    this.source.connect(this.analyser);\n    this.analyser.connect(this.ctx.destination);\n    this.trackEnded = createEvent();\n\n    this.audio.addEventListener(\"ended\", () => {\n      this.trackEnded();\n    });\n  }\n\n  updateByteData = () => {\n    this.analyser.getByteFrequencyData(this.dataArray);\n  };\n\n  play = (track) => {\n    return new Promise(async (res, rej) => {\n      try {\n        await this.ctx.resume();\n        this.audio.muted = false;\n        this.audio.src = window.URL.createObjectURL(track);\n        await this.audio.play();\n        res(true);\n      } catch (error) {\n        rej(error);\n      }\n    });\n  };\n\n  pause = () => {\n    this.audio.pause();\n  };\n}\n\nexport const analyser = new Analyser();\n","import React, { useRef } from \"react\";\nimport styled from \"styled-components\";\nimport classnames from \"classnames\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 480px;\n  width: 100%;\n  height: 125px;\n  border: 2px dashed rgba(121, 183, 125, 1);\n  color: rgb(121, 183, 125);\n  transition: 0.5s;\n  opacity: 0.5;\n\n  &.error {\n    border-color: red;\n    color: red;\n  }\n`;\n\nconst Label = styled.label.attrs({ htmlFor: \"file\" })`\n  color: #03a9f4;\n  margin-top: 5px;\n`;\n\nconst InputFile = styled.input.attrs({ type: \"file\", id: \"file\" })`\n  display: none;\n`;\n\nexport function Dropzone({ handleFiles, error }) {\n  const zone = useRef();\n\n  return (\n    <>\n      <Wrapper\n        className={classnames({ error: !!error })}\n        ref={zone}\n        onDrop={(e) => {\n          e.preventDefault();\n          handleFiles(e.dataTransfer.files);\n        }}\n        onDragOver={(e) => {\n          e.preventDefault();\n        }}\n      >\n        <p>{error ? error : \"drag & drop music list\"}</p>\n      </Wrapper>\n      <Label>or click here for open files</Label>\n      <InputFile\n        onChange={(e) => {\n          handleFiles(e.target.files);\n        }}\n        multiple\n      />\n    </>\n  );\n}\n","import { restore, createEvent, createEffect, forward } from \"effector\";\n\nexport const setTrackList = createEvent();\nexport const setActiveTrack = createEvent();\n\nexport const validateMusicFx = createEffect(\n  (files) =>\n    new Promise((res, rej) => {\n      const validTypes = [\"audio/mp3\", \"audio/mp4\", \"audio/mpeg\"];\n\n      for (let i = 0; i < files.length; i++) {\n        if (validTypes.indexOf(files[i].type) === -1) {\n          rej(\"has invalid type of files\");\n          break;\n        }\n      }\n\n      res(Array.from(files));\n    })\n);\n\nexport const $trackList = restore(validateMusicFx.doneData, []);\nexport const $validateMusicError = restore(\n  validateMusicFx.failData,\n  null\n).reset(validateMusicFx.doneData);\nexport const $activeTrack = restore(setActiveTrack, null);\n\nforward({ from: setTrackList, to: validateMusicFx });\n","import {\n  createEffect,\n  createEvent,\n  forward,\n  sample,\n  combine,\n  createStore,\n} from \"effector\";\nimport { condition } from \"patronum/condition\";\nimport { analyser } from \"../../lib/analyser\";\nimport { $trackList, $activeTrack, setActiveTrack } from \"../dropzone\";\n\n/**\n * <File>\n */\nexport const play = createEvent();\nexport const pause = createEvent();\nexport const toggleTrack = createEvent();\nexport const switchTrack = createEvent();\n\nexport const playFx = createEffect().use(analyser.play);\nconst pauseFx = createEffect().use(analyser.pause);\n\nexport const $isPlays = createStore(false)\n  .on(play, () => true)\n  .reset(pause);\n\nexport const $player = combine({\n  trackList: $trackList,\n  activeTrack: $activeTrack,\n  isPlays: $isPlays,\n});\n\nconst toggleTrackWithPlayer = sample(\n  $player,\n  toggleTrack,\n  (...params) => params\n);\n\nfunction runNextTrack({ list, activeTrack }, direction = \"next\") {\n  const index = list.findIndex((track) => track === activeTrack);\n  const nextIndex = direction === \"next\" ? index + 1 : index - 1;\n\n  return index === -1 || !list[nextIndex] ? list[0] : list[nextIndex];\n}\n\ncondition({\n  source: toggleTrackWithPlayer,\n  if: ([{ activeTrack, isPlays }, selectedTtack]) =>\n    activeTrack === selectedTtack && isPlays,\n  then: pause,\n  else: play.prepend(([_, selectedTtack]) => selectedTtack),\n});\n\nsample({\n  source: $player,\n  clock: switchTrack,\n  fn: (player, direction) => runNextTrack(player, direction),\n  target: play,\n});\n\nforward({\n  from: play,\n  to: [setActiveTrack, playFx],\n});\n\nforward({\n  from: pause,\n  to: pauseFx,\n});\n\nforward({\n  from: analyser.trackEnded,\n  to: switchTrack,\n});\n","import { createGlobalStyle } from \"styled-components\";\n\nexport const GlobalStyles = createGlobalStyle`\n  body {\n    color: #0B0B0B;\n    font-family: \"Roboto Mono\", monospace;\n    text-rendering: optimizeLegibility;\n    -webkit-font-smoothing: antialiased;\n    width: 100vw;\n    height: 100vh;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n  }\n\n  #root {\n    width: 100%;\n    height: 100%;\n  }\n\n  audio {\n    position: absolute;\n    z-index: 5;\n    top: 0;\n    left: 0\n  }\n`;\n","import React, { useRef, useEffect, useState } from \"react\";\nimport styled from \"styled-components\";\nimport { analyser } from \"../lib/analyser\";\nimport { useResize } from \"../lib/resize\";\n\nconst Wrapper = styled.div`\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  z-index: -1;\n  display: flex;\n  align-items: flex-end;\n\n  > svg {\n    width: 100%;\n  }\n`;\n\nexport function Visualize() {\n  const ref = useRef();\n  const [canvasWidth, setCanvasWidth] = useState(window.innerWidth);\n\n  useResize(({ width }) => {\n    setCanvasWidth(width);\n  });\n\n  useEffect(() => {\n    let reqId = undefined;\n    const chartMaxHeigth = 300;\n    const chartWidth = 5 * window.devicePixelRatio;\n    const ctx = ref.current.getContext(\"2d\");\n    let prevSlice = [];\n\n    ref.current.height = chartMaxHeigth;\n    ref.current.width = canvasWidth;\n\n    function tick() {\n      if (!ref.current) {\n        return;\n      }\n\n      analyser.updateByteData();\n\n      ctx.clearRect(0, 0, ref.current.width, ref.current.height);\n      ctx.save();\n      ctx.translate(0, chartMaxHeigth);\n\n      const dataSlice = Array.from(analyser.dataArray).slice(\n        0,\n        Math.ceil(canvasWidth / chartWidth)\n      );\n\n      dataSlice.forEach((data, i) => {\n        const yPos =\n          data === 0 ? (prevSlice[i] || -1) + 1 : ((prevSlice[i] = data), data);\n\n        ctx.fillStyle = `rgba(235, 32, ${data}, .9)`;\n        ctx.fillRect(i * chartWidth, yPos * -1, chartWidth, chartMaxHeigth);\n      });\n\n      ctx.stroke();\n      ctx.restore();\n\n      reqId = requestAnimationFrame(tick);\n    }\n\n    reqId = requestAnimationFrame(tick);\n\n    return () => {\n      cancelAnimationFrame(reqId);\n    };\n  }, [canvasWidth]);\n\n  return (\n    <Wrapper>\n      <canvas ref={ref} />\n    </Wrapper>\n  );\n}\n","import { useEffect, useRef } from \"react\";\n\nexport function useResize(callback) {\n  const callbackRef = useRef(callback);\n\n  callbackRef.current = callback;\n\n  useEffect(() => {\n    function handler() {\n      callbackRef.current({\n        width: window.innerWidth,\n        height: window.innerHeight,\n      });\n    }\n\n    window.addEventListener(\"resize\", handler);\n\n    return () => {\n      window.removeEventListener(\"resize\", handler);\n    };\n  }, []);\n}\n","import React, { useEffect } from \"react\";\nimport styled from \"styled-components\";\nimport { useStore } from \"effector-react\";\nimport { useHistory } from \"react-router-dom\";\nimport bg from \"../../assets/bg.jpg\";\nimport { Player, toggleTrack, pause } from \"../../features/player\";\nimport { $trackList, $activeTrack } from \"../../features/dropzone\";\nimport { Visualize } from \"../../ui\";\n\nconst Background = styled.div`\n  z-index: -2;\n  filter: blur(2px);\n  background: #fff url(${bg}) center center / cover;\n`;\n\nconst PlayerWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n\n  &:before,\n  &:after,\n  ${Background} {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n`;\n\nexport function PlayerPage() {\n  const { push } = useHistory();\n  const trackList = useStore($trackList);\n  const activeTrack = useStore($activeTrack);\n\n  useEffect(() => {\n    return () => {\n      pause();\n    };\n  }, []);\n\n  useEffect(() => {\n    if (trackList.length === 0) {\n      push(\"/\");\n    }\n  }, [push, trackList.length]);\n\n  return (\n    <>\n      <PlayerWrapper>\n        <Background />\n        <Player\n          activeTrack={activeTrack}\n          list={trackList}\n          toggleTrack={(file) => {\n            toggleTrack(file);\n          }}\n        />\n      </PlayerWrapper>\n      <Visualize />\n    </>\n  );\n}\n","import { useStore } from \"effector-react\";\nimport React, { useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport styled from \"styled-components\";\nimport {\n  Dropzone,\n  validateMusicFx,\n  setTrackList,\n  $validateMusicError,\n} from \"../../features/dropzone\";\n\nconst Wrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100vw;\n  height: 100vh;\n  flex-direction: column;\n`;\n\nexport function DropzonePage() {\n  const history = useHistory();\n  const validateMusicError = useStore($validateMusicError);\n\n  useEffect(() => {\n    return validateMusicFx.done.watch(() => {\n      history.push(\"/player\");\n    });\n  }, [history]);\n\n  return (\n    <Wrapper>\n      <h1>Simple Music Player</h1>\n      <Dropzone handleFiles={setTrackList} error={validateMusicError} />\n    </Wrapper>\n  );\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { HashRouter, Route } from \"react-router-dom\";\nimport { PlayerPage, DropzonePage } from \"./pages\";\nimport { GlobalStyles } from \"./ui\";\n\nfunction App() {\n  return (\n    <React.StrictMode>\n      <GlobalStyles />\n      <HashRouter>\n        <Route path=\"/\" component={DropzonePage} exact />\n        <Route path=\"/player\" component={PlayerPage} />\n      </HashRouter>\n    </React.StrictMode>\n  );\n}\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}