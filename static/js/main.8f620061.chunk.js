(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[0],{43:function(n,e,t){"use strict";t.r(e);var r=t(1),i=t(0),c=t.n(i),a=t(25),o=t.n(a),u=t(19),s=t(3),d=t(4),f=t(5),l=t(15),b=t.p+"static/media/bg.418ef879.jpg",h=t(16),j=t.n(h);function p(){var n=Object(d.a)(["\n  display: flex;\n  width: 100%;\n  box-sizing: border-box;\n  list-style: none;\n  flex-direction: column;\n  cursor: pointer;\n  transition: 0.3s;\n  padding: 25px 15px;\n  font-size: 12px;\n  font-weight: 300;\n  border-bottom: 1px solid #e6e6e6;\n\n  &:hover {\n    background: #eb2045;\n    color: #fff;\n  }\n\n  &.active {\n    background: #eb2045;\n    color: #fff;\n  }\n"]);return p=function(){return n},n}function O(){var n=Object(d.a)(["\n  width: 100%;\n  margin: 0;\n  padding: 0;\n"]);return O=function(){return n},n}var v=f.b.ul(O()),x=f.b.li(p());function m(n){var e=n.list,t=n.onTrackClick,i=n.activeTrack;return Object(r.jsx)(v,{children:e.map((function(n){return Object(r.jsx)(x,{className:j()({active:i===n}),onClick:function(){t(n)},children:n.name},"".concat(n.name,"/").concat(n.lastModified))}))})}function g(){var n=Object(d.a)(["\n  width: 320px;\n  height: 510px;\n  background: #fff;\n  border-radius: 5px;\n  box-shadow: 0 0 20px 0px #6c171e;\n  overflow: hidden;\n"]);return g=function(){return n},n}var y=f.b.div(g());function w(n){var e=n.list,t=n.handlePlay,i=n.activeTrack;return Object(r.jsx)(y,{children:Object(r.jsx)(m,{list:e,onTrackClick:t,activeTrack:i})})}var k=t(2),A=t(20),E=t.n(A),z=t(29),F=t(30),B=new function n(){var e=this;Object(F.a)(this,n),this.updateByteData=function(){e.analyser.getByteFrequencyData(e.dataArray)},this.play=function(n){return new Promise(function(){var t=Object(z.a)(E.a.mark((function t(r,i){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ctx.resume();case 3:e.audio.src=window.URL.createObjectURL(n),e.audio.play(),r(!0),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),i(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(n,e){return t.apply(this,arguments)}}())},this.pause=function(){e.audio.pause()},this.audio=new Audio,this.ctx=new AudioContext,this.source=this.ctx.createMediaElementSource(this.audio),this.analyser=this.ctx.createAnalyser(),this.analyser.fftSize=2048,this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.source.connect(this.analyser),this.analyser.connect(this.ctx.destination),this.trackEnded=Object(k.e)(),this.audio.addEventListener("ended",(function(){e.trackEnded()}))};function R(){var n=Object(d.a)(["\n  display: none;\n"]);return R=function(){return n},n}function C(){var n=Object(d.a)(["\n  color: #03a9f4;\n  margin-top: 5px;\n"]);return C=function(){return n},n}function T(){var n=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 480px;\n  width: 100%;\n  height: 125px;\n  border: 2px dashed rgba(121, 183, 125, 1);\n  color: rgb(121, 183, 125);\n  transition: 0.5s;\n  opacity: 0.5;\n\n  &.error {\n    border-color: red;\n    color: red;\n  }\n"]);return T=function(){return n},n}var D=f.b.div(T()),L=f.b.label.attrs({htmlFor:"file"})(C()),M=f.b.input.attrs({type:"file",id:"file"})(R());function S(n){var e=n.handleFiles,t=n.error,c=Object(i.useRef)();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(D,{className:j()({error:!!t}),ref:c,onDrop:function(n){e(n.dataTransfer.files)},children:Object(r.jsx)("p",{children:t||"drag & drop music list"})}),Object(r.jsx)(L,{children:"or click here for open files"}),Object(r.jsx)(M,{onChange:function(n){e(n.target.files)},multiple:!0})]})}var P=Object(k.e)(),q=Object(k.e)(),U=Object(k.d)((function(n){return new Promise((function(e,t){for(var r=["audio/mp3","audio/mp4","audio/mpeg"],i=0;i<n.length;i++)if(-1===r.indexOf(n[i].type)){t("has invalid type of files");break}e(Array.from(n))}))})),I=Object(k.j)(U.doneData,[]),J=Object(k.j)(U.failData,null),N=Object(k.j)(q,null);Object(k.g)({from:P,to:U});var W=Object(k.e)(),H=Object(k.e)(),G=Object(k.e)(),K=Object(k.d)().use(B.play),Q=Object(k.d)().use(B.pause),V=Object(k.b)(I,N,(function(n,e){return{list:n,active:e}}));function X(){var n=Object(d.a)(['\n  body {\n    color: #0B0B0B;\n    font-family: "Roboto Mono", monospace;\n    text-rendering: optimizeLegibility;\n    -webkit-font-smoothing: antialiased;\n    width: 100vw;\n    height: 100vh;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n  }\n\n  #root {\n    width: 100%;\n    height: 100%;\n  }\n\n  audio {\n    position: absolute;\n    z-index: 5;\n    top: 0;\n    left: 0\n  }\n']);return X=function(){return n},n}Object(k.g)({from:W,to:[q,K]}),Object(k.g)({from:H,to:Q}),Object(k.g)({from:B.trackEnded,to:G}),Object(k.k)({source:V,clock:G,fn:function(n,e){return function(n){var e=n.list,t=n.active,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next",i=e.findIndex((function(n){return n===t})),c="next"===r?i+1:i-1;return-1!==i&&e[c]?e[c]:e[0]}(n,e)},target:W});var Y=Object(f.a)(X()),Z=t(8);function $(){var n=Object(d.a)(["\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  z-index: -1;\n  display: flex;\n  align-items: flex-end;\n\n  > svg {\n    width: 100%;\n  }\n"]);return $=function(){return n},n}var _=f.b.div($());function nn(){var n=Object(i.useRef)(),e=Object(i.useState)(window.innerWidth),t=Object(Z.a)(e,2),c=t[0],a=t[1];return function(n){var e=Object(i.useRef)(n);e.current=n,Object(i.useEffect)((function(){function n(){e.current({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[])}((function(n){var e=n.width;a(e)})),Object(i.useEffect)((function(){var e=void 0,t=n.current.getContext("2d");return n.current.height=500,n.current.width=c,e=requestAnimationFrame((function r(){B.updateByteData(),t.clearRect(0,0,n.current.width,n.current.height),Array.from(B.dataArray).slice(0,Math.ceil(c/4)).forEach((function(n,e){var r=0===n?500:n;t.fillStyle="rgba(235, 32, ".concat(n,", .9)"),t.fillRect(4*e,r,4,500)})),t.stroke(),e=requestAnimationFrame(r)})),function(){cancelAnimationFrame(e)}}),[c]),Object(r.jsx)(_,{children:Object(r.jsx)("canvas",{ref:n})})}function en(){var n=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n\n  &:before,\n  &:after,\n  "," {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n"]);return en=function(){return n},n}function tn(){var n=Object(d.a)(["\n  z-index: -2;\n  filter: blur(2px);\n  background: #fff url(",") center center / cover;\n"]);return tn=function(){return n},n}var rn=f.b.div(tn(),b),cn=f.b.div(en(),rn);function an(){var n=Object(l.a)(I),e=Object(l.a)(N);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(cn,{children:[Object(r.jsx)(rn,{}),Object(r.jsx)(w,{activeTrack:e,list:n,handlePlay:function(n){W(n)}})]}),Object(r.jsx)(nn,{})]})}function on(){var n=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100vw;\n  height: 100vh;\n  flex-direction: column;\n"]);return on=function(){return n},n}var un=f.b.div(on());function sn(){var n=Object(s.e)(),e=Object(l.a)(J);return Object(i.useEffect)((function(){return U.done.watch((function(){n.push("/player")}))}),[n]),Object(r.jsxs)(un,{children:[Object(r.jsx)("h1",{children:"Simple Music Player"}),Object(r.jsx)(S,{handleFiles:P,error:e})]})}function dn(){return Object(r.jsxs)(c.a.StrictMode,{children:[Object(r.jsx)(Y,{}),Object(r.jsxs)(u.a,{children:[Object(r.jsx)(s.a,{path:"/",component:sn,exact:!0}),Object(r.jsx)(s.a,{path:"/player",component:an})]})]})}o.a.render(Object(r.jsx)(dn,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.8f620061.chunk.js.map