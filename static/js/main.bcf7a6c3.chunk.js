(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[0],{43:function(n,e,t){"use strict";t.r(e);var r=t(1),i=t(0),c=t.n(i),a=t(25),o=t.n(a),u=t(19),s=t(3),d=t(4),f=t(5),l=t(15),b=t.p+"static/media/bg.418ef879.jpg",h=t(16),j=t.n(h);function p(){var n=Object(d.a)(["\n  display: flex;\n  width: 100%;\n  box-sizing: border-box;\n  list-style: none;\n  flex-direction: column;\n  cursor: pointer;\n  transition: 0.3s;\n  padding: 25px 15px;\n  font-size: 12px;\n  font-weight: 300;\n  border-bottom: 1px solid #e6e6e6;\n\n  &:hover {\n    background: #eb2045;\n    color: #fff;\n  }\n\n  &.active {\n    background: #eb2045;\n    color: #fff;\n  }\n"]);return p=function(){return n},n}function v(){var n=Object(d.a)(["\n  width: 100%;\n  margin: 0;\n  padding: 0;\n"]);return v=function(){return n},n}var x=f.b.ul(v()),O=f.b.li(p());function m(n){var e=n.list,t=n.onTrackClick,i=n.activeTrack;return Object(r.jsx)(x,{children:e.map((function(n){return Object(r.jsx)(O,{className:j()({active:i===n}),onClick:function(){t(n)},children:n.name},"".concat(n.name,"/").concat(n.lastModified))}))})}function g(){var n=Object(d.a)(["\n  width: 320px;\n  height: 510px;\n  background: #fff;\n  border-radius: 5px;\n  box-shadow: 0 0 20px 0px #6c171e;\n  overflow: hidden;\n"]);return g=function(){return n},n}var w=f.b.div(g());function y(n){var e=n.list,t=n.handlePlay,i=n.activeTrack;return Object(r.jsx)(w,{children:Object(r.jsx)(m,{list:e,onTrackClick:t,activeTrack:i})})}var k=t(2),A=t(20),E=t.n(A),D=t(29),z=t(30),F=window.AudioContext||window.webkitAudioContext,R=new function n(){var e=this;Object(z.a)(this,n),this.updateByteData=function(){e.analyser.getByteFrequencyData(e.dataArray)},this.play=function(n){return new Promise(function(){var t=Object(D.a)(E.a.mark((function t(r,i){return E.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.ctx.resume();case 3:return e.audio.muted=!1,e.audio.src=window.URL.createObjectURL(n),t.next=7,e.audio.play();case 7:r(!0),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),i(t.t0);case 13:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(n,e){return t.apply(this,arguments)}}())},this.pause=function(){e.audio.pause()},this.audio=new Audio,this.ctx=new F,this.source=this.ctx.createMediaElementSource(this.audio),this.analyser=this.ctx.createAnalyser(),this.analyser.fftSize=2048,this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.source.connect(this.analyser),this.analyser.connect(this.ctx.destination),this.trackEnded=Object(k.e)(),this.audio.addEventListener("ended",(function(){e.trackEnded()}))};function B(){var n=Object(d.a)(["\n  display: none;\n"]);return B=function(){return n},n}function C(){var n=Object(d.a)(["\n  color: #03a9f4;\n  margin-top: 5px;\n"]);return C=function(){return n},n}function T(){var n=Object(d.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 480px;\n  width: 100%;\n  height: 125px;\n  border: 2px dashed rgba(121, 183, 125, 1);\n  color: rgb(121, 183, 125);\n  transition: 0.5s;\n  opacity: 0.5;\n\n  &.error {\n    border-color: red;\n    color: red;\n  }\n"]);return T=function(){return n},n}var L=f.b.div(T()),M=f.b.label.attrs({htmlFor:"file"})(C()),P=f.b.input.attrs({type:"file",id:"file"})(B());function S(n){var e=n.handleFiles,t=n.error,c=Object(i.useRef)();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(L,{className:j()({error:!!t}),ref:c,onDrop:function(n){n.preventDefault(),e(n.dataTransfer.files)},onDragOver:function(n){n.preventDefault()},children:Object(r.jsx)("p",{children:t||"drag & drop music list"})}),Object(r.jsx)(M,{children:"or click here for open files"}),Object(r.jsx)(P,{onChange:function(n){e(n.target.files)},multiple:!0})]})}var q=Object(k.e)(),U=Object(k.e)(),I=Object(k.d)((function(n){return new Promise((function(e,t){for(var r=["audio/mp3","audio/mp4","audio/mpeg"],i=0;i<n.length;i++)if(-1===r.indexOf(n[i].type)){t("has invalid type of files");break}e(Array.from(n))}))})),J=Object(k.j)(I.doneData,[]),N=Object(k.j)(I.failData,null).reset(I.doneData),W=Object(k.j)(U,null);Object(k.g)({from:q,to:I});var H=Object(k.e)(),G=Object(k.e)(),K=Object(k.e)(),Q=Object(k.d)().use(R.play),V=Object(k.d)().use(R.pause),X=Object(k.b)(J,W,(function(n,e){return{list:n,active:e}}));function Y(){var n=Object(d.a)(['\n  body {\n    color: #0B0B0B;\n    font-family: "Roboto Mono", monospace;\n    text-rendering: optimizeLegibility;\n    -webkit-font-smoothing: antialiased;\n    width: 100vw;\n    height: 100vh;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n  }\n\n  #root {\n    width: 100%;\n    height: 100%;\n  }\n\n  audio {\n    position: absolute;\n    z-index: 5;\n    top: 0;\n    left: 0\n  }\n']);return Y=function(){return n},n}Object(k.g)({from:H,to:[U,Q]}),Object(k.g)({from:G,to:V}),Object(k.g)({from:R.trackEnded,to:K}),Object(k.k)({source:X,clock:K,fn:function(n,e){return function(n){var e=n.list,t=n.active,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"next",i=e.findIndex((function(n){return n===t})),c="next"===r?i+1:i-1;return-1!==i&&e[c]?e[c]:e[0]}(n,e)},target:H});var Z=Object(f.a)(Y()),$=t(8);function _(){var n=Object(d.a)(["\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  z-index: -1;\n  display: flex;\n  align-items: flex-end;\n\n  > svg {\n    width: 100%;\n  }\n"]);return _=function(){return n},n}var nn=f.b.div(_());function en(){var n=Object(i.useRef)(),e=Object(i.useState)(window.innerWidth),t=Object($.a)(e,2),c=t[0],a=t[1];return function(n){var e=Object(i.useRef)(n);e.current=n,Object(i.useEffect)((function(){function n(){e.current({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",n),function(){window.removeEventListener("resize",n)}}),[])}((function(n){var e=n.width;a(e)})),Object(i.useEffect)((function(){var e=void 0,t=5*window.devicePixelRatio,r=n.current.getContext("2d"),i=[];return n.current.height=300,n.current.width=c,e=requestAnimationFrame((function a(){n.current&&(R.updateByteData(),r.clearRect(0,0,n.current.width,n.current.height),r.save(),r.translate(0,300),Array.from(R.dataArray).slice(0,Math.ceil(c/t)).forEach((function(n,e){var c=0===n?(i[e]||-1)+1:(i[e]=n,n);r.fillStyle="rgba(235, 32, ".concat(n,", .9)"),r.fillRect(e*t,-1*c,t,300)})),r.stroke(),r.restore(),e=requestAnimationFrame(a))})),function(){cancelAnimationFrame(e)}}),[c]),Object(r.jsx)(nn,{children:Object(r.jsx)("canvas",{ref:n})})}function tn(){var n=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n\n  &:before,\n  &:after,\n  "," {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n"]);return tn=function(){return n},n}function rn(){var n=Object(d.a)(["\n  z-index: -2;\n  filter: blur(2px);\n  background: #fff url(",") center center / cover;\n"]);return rn=function(){return n},n}var cn=f.b.div(rn(),b),an=f.b.div(tn(),cn);function on(){var n=Object(l.a)(J),e=Object(l.a)(W);return Object(i.useEffect)((function(){return function(){G()}}),[]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(an,{children:[Object(r.jsx)(cn,{}),Object(r.jsx)(y,{activeTrack:e,list:n,handlePlay:function(n){H(n)}})]}),Object(r.jsx)(en,{})]})}function un(){var n=Object(d.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100vw;\n  height: 100vh;\n  flex-direction: column;\n"]);return un=function(){return n},n}var sn=f.b.div(un());function dn(){var n=Object(s.e)(),e=Object(l.a)(N);return Object(i.useEffect)((function(){return I.done.watch((function(){n.push("/player")}))}),[n]),Object(r.jsxs)(sn,{children:[Object(r.jsx)("h1",{children:"Simple Music Player"}),Object(r.jsx)(S,{handleFiles:q,error:e})]})}function fn(){return Object(r.jsxs)(c.a.StrictMode,{children:[Object(r.jsx)(Z,{}),Object(r.jsxs)(u.a,{children:[Object(r.jsx)(s.a,{path:"/",component:dn,exact:!0}),Object(r.jsx)(s.a,{path:"/player",component:on})]})]})}o.a.render(Object(r.jsx)(fn,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.bcf7a6c3.chunk.js.map