(this["webpackJsonpmusic-player"]=this["webpackJsonpmusic-player"]||[]).push([[0],{96:function(n,t,e){"use strict";e.r(t);var r=e(2),i=e(0),a=e.n(i),c=e(39),o=e.n(c),u=e(28),s=e(3),f=e(6),l=e(7),d=e(20),b=e.p+"static/media/bg.418ef879.jpg",h=e(23),j=e.n(h);function p(){var n=Object(f.a)(["\n  display: flex;\n  width: 100%;\n  box-sizing: border-box;\n  list-style: none;\n  flex-direction: column;\n  cursor: pointer;\n  /* transition: 0.3s; */\n  padding: 25px 15px;\n  font-size: 12px;\n  font-weight: 300;\n  border-bottom: 1px solid #e6e6e6;\n\n  &:hover {\n    background: #eb2045;\n    color: #fff;\n  }\n\n  &.active {\n    background: #eb2045;\n    color: #fff;\n  }\n"]);return p=function(){return n},n}function x(){var n=Object(f.a)(["\n  width: 100%;\n  margin: 0;\n  padding: 0;\n"]);return x=function(){return n},n}var O=l.b.ul(x()),v=l.b.li(p());function m(n){var t=n.list,e=n.onTrackClick,i=n.activeTrack;return Object(r.jsx)(O,{children:t.map((function(n){return Object(r.jsx)(v,{className:j()({active:i===n}),onClick:function(){e(n)},children:n.name})}))})}function y(){var n=Object(f.a)(["\n  width: 320px;\n  height: 510px;\n  background: #fff;\n  border-radius: 5px;\n"]);return y=function(){return n},n}var g=l.b.div(y());function w(n){var t=n.list,e=n.handlePlay,i=n.activeTrack;return Object(r.jsx)(g,{children:Object(r.jsx)(m,{list:t,onTrackClick:e,activeTrack:i})})}var k=e(1),A=e(14),E=e.n(A),F=e(43),B=e(44),z=new function n(){var t=this;Object(B.a)(this,n),this.updateByteData=function(){t.analyser.getByteFrequencyData(t.dataArray)},this.play=function(n){return new Promise(function(){var e=Object(F.a)(E.a.mark((function e(r,i){return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.ctx.resume();case 3:t.audio.src=window.URL.createObjectURL(n),t.audio.play(),r(!0),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),i(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(n,t){return e.apply(this,arguments)}}())},this.pause=function(){t.audio.pause()},this.audio=new Audio,this.ctx=new AudioContext,this.source=this.ctx.createMediaElementSource(this.audio),this.analyser=this.ctx.createAnalyser(),this.analyser.fftSize=2048,this.dataArray=new Uint8Array(this.analyser.frequencyBinCount),this.source.connect(this.analyser),this.analyser.connect(this.ctx.destination)};function T(){var n=Object(f.a)(["\n  display: none;\n"]);return T=function(){return n},n}function C(){var n=Object(f.a)(["\n  color: #03a9f4;\n  margin-top: 5px;\n"]);return C=function(){return n},n}function D(){var n=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  max-width: 480px;\n  width: 100%;\n  height: 125px;\n  border: 2px dashed rgba(121, 183, 125, 1);\n  color: rgb(121, 183, 125);\n  transition: 0.5s;\n  opacity: 0.5;\n\n  &.error {\n    border-color: red;\n    color: red;\n  }\n"]);return D=function(){return n},n}var P=l.b.div(D()),R=l.b.label.attrs({htmlFor:"file"})(C()),q=l.b.input.attrs({type:"file",id:"file"})(T());function M(n){var t=n.handleFiles,e=n.error,a=Object(i.useRef)();return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(P,{className:j()({error:!!e}),ref:a,onDrop:function(n){t(n.dataTransfer.files)},children:Object(r.jsx)("p",{children:e||"drag & drop music list"})}),Object(r.jsx)(R,{children:"or click here for open files"}),Object(r.jsx)(q,{onChange:function(n){t(n.target.files)},multiple:!0})]})}var S=e(10),L=Object(S.createEvent)(),U=Object(S.createEvent)(),J=Object(S.createEffect)((function(n){return new Promise((function(t,e){for(var r=["audio/mp3","audio/mp4","audio/mpeg"],i=0;i<n.length;i++)if(-1===r.indexOf(n[i].type)){e("has invalid type of files");break}t(Array.from(n))}))})),N=Object(S.restore)(J.doneData,[]),I=Object(S.restore)(J.failData,null),G=Object(S.restore)(U,null);Object(S.forward)({from:L,to:J});var H=Object(k.createEvent)(),K=Object(k.createEvent)(),Q=Object(k.createEffect)().use(z.play),V=Object(k.createEffect)().use(z.pause);function W(){var n=Object(f.a)(['\n  body {\n    color: #0B0B0B;\n    font-family: "Roboto Mono", monospace;\n    text-rendering: optimizeLegibility;\n    -webkit-font-smoothing: antialiased;\n    width: 100vw;\n    height: 100vh;\n    margin: 0;\n    padding: 0;\n    overflow: hidden;\n  }\n\n  #root {\n    width: 100%;\n    height: 100%;\n  }\n\n  audio {\n    position: absolute;\n    z-index: 5;\n    top: 0;\n    left: 0\n  }\n']);return W=function(){return n},n}Object(k.forward)({from:H,to:[U,Q]}),Object(k.forward)({from:K,to:V});var X=Object(l.a)(W()),Y=e(32);function Z(){var n=Object(f.a)(["\n  position: absolute;\n  bottom: 0;\n  width: 100%;\n  height: 100%;\n  background: transparent;\n  z-index: -1;\n  display: flex;\n  align-items: flex-end;\n\n  > svg {\n    width: 100%;\n  }\n"]);return Z=function(){return n},n}var $=l.b.div(Z());function _(){var n=Object(i.useRef)();return Object(i.useEffect)((function(){Y.a(n.current).selectAll("rect").data(z.dataArray).enter().append("rect").attr("x",(function(n,t){return 4*t})).attr("width",4)}),[]),Object(i.useEffect)((function(){var t=void 0;return t=requestAnimationFrame((function e(){z.updateByteData(),Y.a(n.current).selectAll("rect").data(z.dataArray).attr("y",(function(n){return 500-n})).attr("height",(function(n){return n})).attr("fill",(function(n){return"rgba(235, 32, ".concat(n,", .9)")})),t=requestAnimationFrame(e)})),function(){cancelAnimationFrame(t)}}),[]),Object(r.jsx)($,{children:Object(r.jsx)("svg",{height:"500",ref:n})})}function nn(){var n=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100%;\n  height: 100%;\n\n  &:before,\n  &:after,\n  "," {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n  }\n"]);return nn=function(){return n},n}function tn(){var n=Object(f.a)(["\n  z-index: -2;\n  filter: blur(2px);\n  background: #fff url(",") center center / cover;\n"]);return tn=function(){return n},n}var en=l.b.div(tn(),b),rn=l.b.div(nn(),en);function an(){var n=Object(d.a)(N),t=Object(d.a)(G);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(rn,{children:[Object(r.jsx)(en,{}),Object(r.jsx)(w,{activeTrack:t,list:n,handlePlay:function(n){H(n)}})]}),Object(r.jsx)(_,{})]})}function cn(){var n=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  width: 100vw;\n  height: 100vh;\n  flex-direction: column;\n"]);return cn=function(){return n},n}var on=l.b.div(cn());function un(){var n=Object(s.e)(),t=Object(d.a)(I);return Object(i.useEffect)((function(){return J.done.watch((function(){n.push("/player")}))}),[n]),Object(r.jsxs)(on,{children:[Object(r.jsx)("h1",{children:"Simple Music Player"}),Object(r.jsx)(M,{handleFiles:L,error:t})]})}function sn(){return Object(r.jsxs)(a.a.StrictMode,{children:[Object(r.jsx)(X,{}),Object(r.jsxs)(u.a,{children:[Object(r.jsx)(s.a,{path:"/",component:un,exact:!0}),Object(r.jsx)(s.a,{path:"/player",component:an})]})]})}o.a.render(Object(r.jsx)(sn,{}),document.getElementById("root"))}},[[96,1,2]]]);
//# sourceMappingURL=main.c36c56d4.chunk.js.map